# URL만 아는 사람만 접근하는 비공개 페이지를 Nextra로 구현한 이유

> 기술 선택은 취향이 아니라 문제 해결의 구조를 어떻게 단순하게 만들 것인가의 문제다.

---

## 문제

작업하면서 깨달은 것: **팀끼리 임시로 공유해야 하는 문서들이 많다**.

- Claude 인스턴스 간 컨텍스트 공유
- 미공개 리서치 문서 (누구나 봐도 되지만, 검색엔진에는 안 띄고 싶음)
- 면접 가이드 같은 민감한 자료
- 기술 회의록 (팀원들만)

그런데 기존 방식들은 문제가 있었다:
- Notion? API 연동 복잡하고, 권한 관리 헷갈림
- Google Drive 공유 링크? 관리하기 힘들고 버전 추적 불가
- 별도 서버? 오버엔지니어링
- 비밀번호 페이지? 매번 입력 번거롭고, 만료 관리 복잡

**핵심 문제**: URL만으로 접근하되, 사이트 구조에는 영향 안 주는 방식이 필요했다.

---

## 기존 접근의 한계

### 1️⃣ 동적 라우팅 + DB 방식
처음엔 이렇게 생각했다:
- Next.js 동적 라우트 `[uuid].tsx` 만들고
- 별도 CMS나 DB에서 데이터 가져오고
- 권한 체크 미들웨어 추가

**왜 안 했나:**
- Nextra를 쓰고 있는데 굳이 Next.js 전환?
- DB 관리 추가 → 배포 복잡도 올라감
- 비용 증가 (DB, 호스팅 비용)
- 유지보수 포인트가 너무 많아짐

### 2️⃣ 외부 라이브러리 사용
`next-mdx-remote` + `gray-matter`로 동적 MDX 처리?

**왜 안 했나:**
- 이미 Nextra가 MDX 파싱을 완벽하게 함
- 라이브러리 업데이트 의존성 증가
- Nextra와의 호환성 보장 불가
- "불필요한 추상화 레이어" 추가

---

## 내가 내린 판단

**판단 기준: "현재 시스템의 능력을 최대한 활용하되, 추가 의존성 최소화"**

Nextra의 특성을 다시 살펴보니:
1. **`pages/` 폴더의 `.mdx` 파일을 자동으로 라우팅**
2. **`_meta.ts`로 네비게이션 제어 가능**
3. **frontmatter 자동 파싱**
4. **기본 레이아웃 커스터마이징 가능**

→ 이것만으로도 충분하다!

**선택한 아키텍처:**
```
pages/
├── (기존 페이지)
└── p/
    ├── _meta.ts              # ← 네비게이션 제외 + 심플 레이아웃
    ├── {uuid}.mdx            # ← 비공개 페이지
    └── {uuid}.mdx
```

**왜 이게 정답인가:**
- 추가 라이브러리 0개
- 빌드 복잡도 증가 0
- Vercel 배포 자동화 (git push만으로)
- 마크다운 → MDX 변환 완전 자동
- 검색엔진 차단은 `robots.txt` 한 줄로 해결

---

## 결과와 배운 점

### 워크플로우 완성

```
Obsidian 문서 작성
    ↓
Claude에 요청: "이 문서 비공개 페이지로 발행해줄 수 있을까?"
    ↓
Python 스크립트 (자동화)
  - UUID 생성
  - Frontmatter 추가
  - MDX 변환
  - pages/p/{uuid}.mdx 생성
    ↓
git add → commit → push
    ↓
Vercel 자동 감지 & 배포 (1-3분)
    ↓
https://codemon.ai/p/{uuid} 완성
    ↓
URL 복사 → 팀 공유 ✨
```

### 구현 결과

**물리적으로 단순해짐:**
- 코드 변경 최소 (`_meta.ts` 한 파일, `robots.txt` 한 파일)
- 배포 자동화 완전
- 마크다운 문법 그대로 사용 (변환 불필요)

**관리 관점에서:**
- git에 모든 히스토리가 남음
- 버전 관리 자동 (git log)
- 삭제도 한 줄: `git rm pages/p/{uuid}.mdx`
- 비용 0 (Vercel 무료 티어)

**조직 확장성:**
- 다른 개발자들도 같은 방식 사용 가능
- 스킬화해서 Claude 인스턴스들과 공유 가능
- 팀 규모 커져도 복잡도 증가 없음

---

## 기술 선택의 본질

이 구현에서 배운 점: **"더 좋은 기술이 아니라, 이미 있는 도구를 얼마나 잘 이해하느냐의 싸움이다."**

- Nextra의 기본 기능만 이해했어도 `_meta.ts`로 네비게이션 제어 가능
- SSG의 이점을 알았으면 동적 라우팅이 필요 없음을 깨달음
- 검색엔진 최적화와 제외의 관점에서 `robots.txt`의 위력 이해

**시스템 아키텍트로서의 관점:**
> "최선의 설계는 추가하는 게 아니라, 불필요한 것을 빼는 것이다."

---

## 생각해볼 질문

**당신의 프로젝트에서:**

1. **지금 사용 중인 프레임워크/도구의 "숨겨진 능력"은 뭘까?**
   - 자동화 가능한 부분을 놓치고 있진 않나?

2. **왜 새로운 라이브러리를 추가하고 싶은 충동이 생기는가?**
   - 정말 필요해서인가, 아니면 모르는 방법이 있어서인가?

3. **"검색엔진에 노출 안 시키되, URL로는 접근 가능"한 페이지가 필요한 상황이 있을까?**
   - 당신 팀의 문서 공유 프로세스는 지금 최적인가?

4. **자동화의 우선순위를 어떻게 판단하나?**
   - 이 비공개 페이지 발행을 자동화한 이유: 한 번이 아니라 계속 반복되는 작업이니까
   - 당신의 프로젝트에서 그런 반복 작업이 있나?

---

*기술을 선택한다는 것은 문제 해결의 구조를 설계하는 것이다.*
