---
title: "Gemini CLI + Google MCP로 풀스택 앱 클라우드 배포하기"
description: "Gemini CLI와 Google Cloud MCP 서버 3개를 연결해서 로컬 앱을 Cloud SQL + Cloud Run으로 배포하는 전 과정"
date: 2026-02-19
author: codemon
tags: [AI, hands-on, MCP, Gemini]
---

# Gemini CLI + Google MCP로 풀스택 앱 클라우드 배포하기

> **AI 핸즈온 시리즈** — YouTube 영상을 따라하며 배우는 실전 가이드

AI 에이전트한테 "이 앱 클라우드에 올려줘"라고 말하면 진짜로 올려주는 시대가 왔다.

Google Cloud가 공식 MCP 서버 3개를 출시했다. **Developer Knowledge** (문서 검색), **Cloud SQL** (DB 관리), **Cloud Run** (배포). Gemini CLI에 이 3개를 연결하면, 자연어로 데이터베이스를 만들고, 데이터를 마이그레이션하고, 앱을 배포할 수 있다.

직접 해봤다.

> 원본 영상: [Gemini CLI + Google MCPs: Migrate &amp; deploy full stack apps](https://youtu.be/SeuhYVg8-AU) (Google Cloud Tech)

![MCP 서버 연결](/images/blog/gemini_mcp_handson/01.png)

---

## 준비물

- Google Cloud 계정 (무료 티어 가능)
- Cloud Shell (브라우저에서 바로 사용)
- Gemini API 키 (AI Studio에서 발급)
- Developer Knowledge API 키

Cloud Shell을 쓰면 로컬에 아무것도 설치할 필요 없다.

---

## Step 1: 프로젝트 클론 &amp; Gemini CLI 설정

Cloud Shell에서 Google의 MCP 저장소를 클론하고, 샘플 앱으로 이동한다.

```bash
git clone https://github.com/GoogleCloudPlatform/google-cloud-mcp.git
cd google-cloud-mcp/samples/allstrides
```

Gemini CLI 설정 파일에 MCP 서버 3개를 연결한다.

```json
{
  "mcpServers": {
    "developer-knowledge": {
      "command": "npx",
      "args": ["-y", "@anthropic/developer-knowledge-mcp"],
      "env": {
        "DEVELOPER_KNOWLEDGE_API_KEY": "your-api-key"
      }
    },
    "cloud-sql": {
      "command": "npx",
      "args": ["-y", "@google-cloud/cloud-sql-mcp"],
      "env": {
        "GOOGLE_CLOUD_PROJECT": "your-project-id"
      }
    },
    "cloud-run": {
      "command": "npx",
      "args": ["-y", "@google-cloud/cloud-run-mcp"]
    }
  }
}
```

Gemini CLI를 시작:

```bash
gemini
```

```
✓ MCP servers connected:
  - developer-knowledge (3 tools)
  - cloud-sql (12 tools)
  - cloud-run (5 tools)

> Ready. How can I help?
```

3개 서버가 연결되면 준비 완료.

---

## Step 2: 데이터베이스 선택 — AI가 문서를 읽고 추천

첫 번째 프롬프트. AI에게 "어떤 DB를 써야 할지" 물어본다.

```
> 이 All Strides 앱에 맞는 Google Cloud 데이터베이스를 추천해줘.
  앱 코드를 분석하고, 공식 문서를 참고해서 결정해줘.
```

Gemini가 하는 일:
1. 앱 코드 분석 (PostgreSQL 사용 확인)
2. **Developer Knowledge MCP** → `search_documents` 도구로 Google Cloud 문서 검색
3. Cloud SQL for PostgreSQL 추천 + 마이그레이션 튜토리얼 생성

```
🔍 Searching Google Cloud documentation...
📄 Found: "Choosing a database" guide
📄 Found: "Cloud SQL for PostgreSQL" quickstart

✅ 추천: Cloud SQL for PostgreSQL
  - 기존 앱이 PostgreSQL 사용 중
  - 관리형 서비스로 운영 부담 최소화
  - Cloud Run과 VPC 커넥터로 쉽게 연결
```

**핵심**: AI가 그냥 "추측"하는 게 아니라, **공식 문서를 실제로 검색**해서 답한다. Developer Knowledge MCP 서버 덕분.

---

## Step 3: Cloud SQL 인스턴스 생성 — 자연어로 DB 만들기

이제 AI에게 DB를 만들라고 한다.

```
> Cloud SQL for PostgreSQL 인스턴스를 만들어줘.
  - 리전: us-central1
  - CPU: 2, 메모리: 8GB
  - 퍼블릭 IP 사용
  - 현재 프로젝트에 생성
```

Gemini가 하는 일:
1. **Cloud SQL MCP** → `create_instance` 도구 호출
2. 인스턴스 생성 완료까지 대기

```
🔧 Creating Cloud SQL instance...
  Name: allstrides-db
  Engine: PostgreSQL 15
  Region: us-central1
  Machine: db-custom-2-8192

⏳ Provisioning... (약 3-5분)
✅ Instance created: allstrides-db
```

콘솔에 들어가서 클릭할 필요가 없다. **자연어 한 줄로 DB 인스턴스 생성 완료**.

---

## Step 4: 데이터 마이그레이션 — 로컬 → 클라우드

로컬 데이터를 Cloud SQL로 옮긴다.

```
> GitHub에서 클론한 데이터를 Cloud SQL 인스턴스로 마이그레이션해줘.
  - 데이터베이스 이름: allstrides_db
  - 사용자: allstrides (DB 소유자 권한)
```

Gemini가 순서대로 실행:
1. `allstrides_db` 데이터베이스 생성
2. `allstrides` 사용자 생성 + 비밀번호 자동 생성
3. 로컬 SQL 덤프 → Cloud SQL import
4. 데이터 검증

```
📊 Migration Summary:
  1. Created database: allstrides_db
  2. Created user: allstrides (owner)
  3. Imported 3 tables, 847 rows
  4. All data verified ✅
```

---

## Step 5: Cloud Run 배포 — 한 줄로 앱 올리기

마지막. 앱을 Cloud Run에 배포한다.

```
> All Strides 앱을 Cloud Run에 배포해줘.
  Cloud SQL 인스턴스와 연결하고, 퍼블릭 URL로 접근 가능하게.
```

Gemini가 하는 일:
1. Dockerfile 확인/생성
2. 컨테이너 이미지 빌드
3. **Cloud Run MCP** → `deploy_service_from_image` 도구 호출
4. Cloud SQL 연결 설정
5. URL 발급

```
🚀 Deploying to Cloud Run...
  Building container image...
  Deploying service: allstrides
  Connecting to Cloud SQL: allstrides-db

✅ Deployed!
  URL: https://allstrides-xxxxx.run.app
```

![배포된 앱](/images/blog/gemini_mcp_handson/02.png)

배포 완료. URL을 열면 실제로 동작하는 풀스택 앱이 나온다.

---

## 전체 흐름 정리

| 단계 | 프롬프트 | MCP 서버 | 도구 |
|------|---------|----------|------|
| DB 선택 | "어떤 DB를 써야 해?" | Developer Knowledge | `search_documents` |
| 인스턴스 생성 | "Cloud SQL 만들어줘" | Cloud SQL | `create_instance` |
| 데이터 이동 | "데이터 마이그레이션해줘" | Cloud SQL | `create_database`, `import_data` |
| 앱 배포 | "Cloud Run에 올려줘" | Cloud Run | `deploy_service_from_image` |

**4개 프롬프트**로 로컬 앱이 클라우드에 올라갔다.

---

## MCP가 바꾸는 것

이 데모에서 가장 인상적인 건 **Developer Knowledge MCP 서버**다.

기존: AI가 학습 데이터 기반으로 "아마 이렇게 하면 될 거야" → 안 되는 코드 생성

지금: AI가 **실시간으로 공식 문서를 검색**해서 정확한 코드 생성

Cloud SQL MCP도 마찬가지. `gcloud` 명령어를 외울 필요 없다. "DB 만들어줘"라고 하면 MCP가 올바른 API를 호출한다.

이게 MCP의 본질이다. **AI에게 도구를 주는 것**. 더 많은 도구를 연결할수록 AI가 할 수 있는 일이 늘어난다.

---

## 참고 자료

- [Google Cloud MCP 저장소](https://github.com/GoogleCloudPlatform/google-cloud-mcp) — 샘플 앱 포함
- [Google MCP 서버 전체 목록](https://cloud.google.com/docs/mcp) — 공식 문서
- [Gemini CLI 설치 가이드](https://ai.google.dev/gemini-api/docs/gemini-cli)
- 원본 영상: [Gemini CLI + Google MCPs](https://youtu.be/SeuhYVg8-AU)

---

*AI 핸즈온 시리즈는 YouTube 영상 속 내용을 직접 따라하며 정리하는 실전 가이드입니다.*
