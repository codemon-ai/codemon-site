---
title: "BlueMango v2 전체 플랫폼 재구축 Draft"
description: "Admin 리빌드에서 전체 플랫폼 재구축으로 스코프 변경"
tags: [bluemango, v2, private]
created: 2026-02-21
---

# Draft: BlueMango v2 — 전체 플랫폼 재구축
> 스코프 변경: Admin 리빌드 → 전체 플랫폼 재구축으로 대폭 변경 (2026-02-21)
## Requirements (확정)
### 핵심 방향
- 전체 플랫폼을 처음부터 새로 만든다
- 1인 개발자(+AI)가 쉽게 유지보수/관리할 수 있는 기술 스택
- 비즈니스 로직만 유지 (기존 코드 구조는 버림)
- FE 디자인만 유지 (코드는 새로 작성 가능)
- LEGACY 문제점 전부 해결 (DB 스키마도 새로)
### 유지할 것
- 비즈니스 로직 (예약, 결제, 상품관리, 정산 등)
- FE 디자인 (피그마 기준, 현재 화면 참조)
- 카카오 로그인
- PG 결제 (이니시스) ← 기존 Toss에서 변경!
- AWS 리소스 활용 (S3 등)
### 새로 만들 것
- Admin Site 전체 (React + Vite + shadcn)
- Backend API 전체 (NestJS? 또는 다른 스택)
- Frontend 전체 (Next.js? React? — 디자인만 유지)
- DB 스키마 (새 DB — Supabase/Neon/Drizzle 등)
### 프로젝트 구조
- 새 repo: bluemango-plan-v2
- 모노레포 고려 (Turborepo?)
### 기술적 제약 해제
- NestJS 고정 아님 (더 가벼운 대안 가능)
- TypeORM 고정 아님 (Drizzle, Prisma 등)
- RDS 고정 아님 (Supabase, Neon 등)
- Next.js 고정 아님 (가벼운 대안 가능)
- Toss Payments → 이니시스로 변경
## 이전 리서치에서 유효한 것
### ✅ 여전히 유효
- Admin UI: React + Vite + shadcn/ui (확정)
- Vercel 배포 (Admin, FE 모두)
- TanStack Query + React Hook Form + Zod
- Playwright E2E 테스트
- Tiptap 에디터, Google Maps
### ⚠️ 재검토 필요
- Hono: API가 EC2에 묶이지 않으면 다시 후보 될 수 있음
- Neon: 서울 리전 없지만 Supabase는 가능?
- NestJS: 1인 개발자에게 과한 프레임워크인가?
### ❌ 무효화
- “FE 코드 변경 없음” → FE도 새로 만들 수 있음
- “Admin API EC2 유지” → 전체 재구축이면 Vercel 가능
- “RDS 유지” → DB도 새로
- “Toss Payments” → 이니시스로 변경
## 접근 전략 (유저 확정)
### Phase 0: 비즈니스 로직 → PRD → 아키텍처 순서로 진행
1. 기존 코드에서 비즈니스 로직 추출 + LEGACY 상충 제거
1. 깨끗한 PRD 작성
1. 기술 스택 + 아키텍처 설계
1. 구현 플랜 생성
### 디자인 전략
- shadcn/ui 프리미엄 DS(Design System) 구매
- Admin + FE 모두 shadcn 기반 템플릿 활용
- 디자인 작업과 개발을 병행 가능
## 서버 환경 (현재 — v2에서 변경 예정)
- admin.bluemango-travel.com → localhost:5173 (SPA, nginx)
- admin-api.bluemango-travel.com → localhost:3001 (NestJS Admin API)
- bm.bluemango-travel.com → localhost:3000 (Next.js FE)
- api.bluemango-travel.com → localhost:3002 (NestJS Service API)
- EC2: 15.164.124.18 | RDS: bluemango-db (ap-northeast-2)
- v2에서 기술 스택 결정에 따라 전면 변경 예정
## 현재 진행 상태
### 비즈니스 로직 — ✅ 전체 수집 완료
- ✅ business-logic-clean.md (522줄) — 6개 도메인, 5개 LEGACY 해결안
- ✅ Booking 도메인 상세 추출 (12 섹션, 상태머신/인보이스/바우처/알림 전체)
- ✅ Payment/Settlement 도메인 상세 추출 (11 섹션, PG플로우/환불/정산계산)
- ✅ Product 도메인 상세 추출 (15 섹션, 14 카테고리/가격정책/가용성)
- ✅ Auth/User/Point 도메인 상세 추출 (7 섹션, 역할계층/JWT/포인트규칙)
### 기술 리서치 — ✅ 전체 수집 완료
### 1. Solo Dev 최적 스택 리서치
추천 스택: Next.js 15 + Better Auth + Supabase (Seoul) + Drizzle ORM + Turborepo
- 모노레포: Turborepo + pnpm workspaces
- 프레임워크: Next.js 15 (App Router) × 2 앱 (web + admin)
- DB: Supabase PostgreSQL (Seoul ap-northeast-2) ✅
- ORM: Drizzle (35KB, 서버리스 최적, 0 dependencies)
- Auth: Better Auth (Auth.js 공식 후계자, 카카오 지원)
- UI: shadcn/ui + Tailwind CSS
- 관리 서비스 4개만: Supabase + Vercel + PG사 + Resend
### 2. 이니시스 PG 리서치
추천: 포트원(PortOne) V2 + KG이니시스 조합
- 이니시스 직접 연동 비권장 (IP 화이트리스트 → Vercel 불가, npm 패키지 없음)
- 포트원 V2: 고정IP 52.78.5.241, TypeScript SDK, Vercel 완벽 호환
- 대안: 토스페이먼츠 직접 (문서 최고, 계약 간단)
- 가상계좌/정기결제/간편결제 모두 포트원 경유 지원
- 유저 “이니시스” 요구 → 포트원 래핑으로 충족 가능
### 3. Supabase All-in-One 리서치
결론: 한국 여행 예약 플랫폼에 실용적, 단 하이브리드 권장
- Seoul 리전: ap-northeast-2 ✅ 공식 지원
- Auth: 카카오 공식 지원 ✅, 네이버 커스텀 구현 필요 ⚠️
- Storage: CDN 285개 도시, S3 대체 가능 ✅
- Edge Functions: NestJS 230개 완전 대체는 비현실적 (CPU 2초 제한)
- 가격: Pro $25 + Compute Medium $60 = ~$85/월 (현재 $100-150 대비 절감)
- 락인 없음: 표준 PostgreSQL, 오픈소스 자체 호스팅 가능
- 핵심 리스크: Edge Functions CPU 제한 → 복잡한 로직은 Next.js API Routes로
## 기술 스택 — ✅ 확정 (2026-02-21)

### 스택 변경 이력
- 이니시스 → 토스페이먼츠 직접 (DX 최고, Vercel 완벽 호환, 계약 간단)
- Toss Payments는 이미 v1에서 사용 중이라 계약 재활용 가능
- NestJS → Next.js API Routes (EC2 제거, 서버리스)
- TypeORM → Drizzle ORM (서버리스 최적)
- RDS → Supabase (Seoul 리전, 통합 인프라)
### 서버 환경 변경 예정
```plain text
v1 (현재)                         → v2 (변경 후)
EC2 + nginx + PM2                → Vercel (서버리스)
RDS PostgreSQL                   → Supabase PostgreSQL (Seoul)
S3                               → Supabase Storage
admin.bluemango-travel.com       → admin.bluemango-travel.com (Vercel)
admin-api.bluemango-travel.com   → (제거, admin 앱에 통합)
bm.bluemango-travel.com          → bm.bluemango-travel.com (Vercel)
api.bluemango-travel.com         → (제거, web 앱에 통합)
```
